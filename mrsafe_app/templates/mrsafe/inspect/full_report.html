{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <h2>🛡️ Full Site Inspection Report</h2>
    <p><strong>Title:</strong> {{ inspection.title }}</p>
    <p><strong>Location:</strong> {{ inspection.location }}</p>
    <p><strong>Date:</strong> {{ inspection.date|date:"Y-m-d H:i" }}</p>
    <p><strong>Inspector:</strong> {{ inspection.inspector.get_full_name }}</p>

    <hr class="my-4" />

    <h4>📝 Observations ({{ observations.count }})</h4>
    {% for obs in observations %}
        <div class="card mb-4">
            <div class="card-body">
                <h5>Observation #{{ forloop.counter }}</h5>
                {% if obs.photo %}
                    <img src="{{ obs.photo.url }}" class="img-fluid mb-3 border" style="max-height: 300px;">
                {% endif %}
                <p><strong>Hazard:</strong><br>{{ obs.hazard_description|linebreaks }}</p>
                <p><strong>Recommendation:</strong><br>{{ obs.recommendations|linebreaks }}</p>
                <p class="text-muted">Recorded at: {{ obs.created_at|date:"Y-m-d H:i" }}</p>
            </div>
        </div>
    {% endfor %}

    <hr />
    <div class="text-center">
        <a href="{% url 'mrsafe_app:export_inspection_pdf' inspection.id %}" class="btn btn-outline-primary me-2">📄 Download PDF</a>
        <a href="{% url 'mrsafe_app:export_inspection_ppt' inspection.id %}" class="btn btn-outline-secondary">📊 Download PowerPoint</a>
    </div>
</div>
{% endblock %}
